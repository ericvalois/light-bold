!function(e){"use strict";function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){(i(e,t)?s:r)(e,t)}var i,r,s;"classList"in document.documentElement?(i=function(e,t){return e.classList.contains(t)},r=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(i=function(e,n){return t(n).test(e.className)},r=function(e,t){i(e,t)||(e.className=e.className+" "+t)},s=function(e,n){e.className=e.className.replace(t(n)," ")});var a={hasClass:i,addClass:r,removeClass:s,toggleClass:n,has:i,add:r,remove:s,toggle:n};"function"==typeof define&&define.amd?define(a):"object"==typeof exports?module.exports=a:e.classie=a}(window),function(e){"use strict";function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,n){this.el=e,this.options=t({},this.options),t(this.options,n),this.menus=[].slice.call(this.el.querySelectorAll(".menu__level")),this.current=0,this._init()}var i={animations:!0},r={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},s=r.animation,a=function(e,t){var n=function(e){if(i.animations){if(e.target!=this)return;this.removeEventListener(s,n)}t&&"function"==typeof t&&t.call()};i.animations?e.addEventListener(s,n):n()},o=document.getElementById("all").innerHTML;n.prototype.options={breadcrumbsCtrl:!0,initialBreadcrumb:o,backCtrl:!1,itemsDelayInterval:60,direction:"r2l",onItemClick:function(e,t){return!1}},n.prototype._init=function(){this.menusArr=[];var e=this;this.menus.forEach(function(t,n){var i={menuEl:t,menuItems:[].slice.call(t.querySelectorAll(".menu__item"))};e.menusArr.push(i),n===e.current&&classie.add(t,"menu__level--current")}),this.options.backCtrl&&(this.backCtrl=document.createElement("button"),this.backCtrl.className="menu__back menu__back--hidden flex flex-center",this.backCtrl.setAttribute("aria-label","Go back"),this.backCtrl.innerHTML='<i class="fa fa-arrow-left" aria-hidden="true"></i>',this.el.insertBefore(this.backCtrl,this.el.firstChild)),e.options.breadcrumbsCtrl&&(this.breadcrumbsCtrl=document.createElement("nav"),this.breadcrumbsCtrl.className="menu__breadcrumbs flex flex-center px2 absolute col-12 bg-white line-height1",this.el.insertBefore(this.breadcrumbsCtrl,this.el.firstChild),this._addBreadcrumb(0)),this._initEvents()},n.prototype._initEvents=function(){for(var e=this,t=0,n=this.menusArr.length;t<n;++t)this.menusArr[t].menuItems.forEach(function(t,n){t.querySelector("a").addEventListener("click",function(t){var i=t.target.getAttribute("data-submenu"),r=t.target.innerHTML,s=e.el.querySelector('ul[data-menu="'+i+'"]');if(i&&s)t.preventDefault(),e._openSubMenu(s,n,r);else{e.el.querySelector(".menu__link--current")&&classie.remove(e.el.querySelector(".menu__link--current"),"menu__link--current"),classie.add(t.target,"menu__link--current"),e.options.onItemClick(t,r)}})});this.options.backCtrl&&this.backCtrl.addEventListener("click",function(){e._back()})},n.prototype._openSubMenu=function(e,t,n){if(this.isAnimating)return!1;this.isAnimating=!0,this.menusArr[this.menus.indexOf(e)].backIdx=this.current,this.menusArr[this.menus.indexOf(e)].name=n,this._menuOut(t),this._menuIn(e,t)},n.prototype._back=function(){if(this.isAnimating)return!1;this.isAnimating=!0,this._menuOut();var e=this.menusArr[this.menusArr[this.current].backIdx].menuEl;this._menuIn(e),this.options.breadcrumbsCtrl&&this.breadcrumbsCtrl.removeChild(this.breadcrumbsCtrl.lastElementChild)},n.prototype._menuOut=function(e){var t=this,n=this.menusArr[this.current].menuEl,i=void 0===e;this.menusArr[this.current].menuItems.forEach(function(n,r){n.style.WebkitAnimationDelay=n.style.animationDelay=i?parseInt(r*t.options.itemsDelayInterval)+"ms":parseInt(Math.abs(e-r)*t.options.itemsDelayInterval)+"ms"}),"r2l"===this.options.direction?classie.add(n,i?"animate-outToRight":"animate-outToLeft"):classie.add(n,i?"animate-outToLeft":"animate-outToRight")},n.prototype._menuIn=function(e,t){var n=this,i=this.menusArr[this.current].menuEl,r=void 0===t,s=this.menus.indexOf(e),o=this.menusArr[s].menuItems,l=o.length;o.forEach(function(o,m){o.style.WebkitAnimationDelay=o.style.animationDelay=r?parseInt(m*n.options.itemsDelayInterval)+"ms":parseInt(Math.abs(t-m)*n.options.itemsDelayInterval)+"ms",m===(t<=l/2||r?l-1:0)&&a(o,function(){"r2l"===n.options.direction?(classie.remove(i,r?"animate-outToRight":"animate-outToLeft"),classie.remove(e,r?"animate-inFromLeft":"animate-inFromRight")):(classie.remove(i,r?"animate-outToLeft":"animate-outToRight"),classie.remove(e,r?"animate-inFromRight":"animate-inFromLeft")),classie.remove(i,"menu__level--current"),classie.add(e,"menu__level--current"),n.current=s,r?0===n.current&&n.options.backCtrl&&classie.add(n.backCtrl,"menu__back--hidden"):(n.options.backCtrl&&classie.remove(n.backCtrl,"menu__back--hidden"),n._addBreadcrumb(s)),n.isAnimating=!1})}),"r2l"===this.options.direction?classie.add(e,r?"animate-inFromLeft":"animate-inFromRight"):classie.add(e,r?"animate-inFromRight":"animate-inFromLeft")},n.prototype._addBreadcrumb=function(e){if(!this.options.breadcrumbsCtrl)return!1;var t=document.createElement("a");if(t.className="border-none ultra-small upper pointer flex flex-center nowrap",e)var n=this.menusArr[e].name.replace(/(<([^>]+)>)/gi,"");t.innerHTML=e?n:this.options.initialBreadcrumb,this.breadcrumbsCtrl.appendChild(t);var i=this;t.addEventListener("click",function(n){if(n.preventDefault(),!t.nextSibling||i.isAnimating)return!1;i.isAnimating=!0,i._menuOut();var r=i.menusArr[e].menuEl;i._menuIn(r);for(var s;s=t.nextSibling;)i.breadcrumbsCtrl.removeChild(s)})},e.MLMenu=n}(window),function(){var e=document.getElementById("ml-menu"),t=new MLMenu(e,{breadcrumbsCtrl:!0,backCtrl:!1,itemsDelayInterval:50})}();